{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <div class="d-flex justify-content-between mb-4">
        <a href="{% url 'consulta_contracheque' %}" class="btn btn-outline-secondary rounded-pill">Voltar</a>
        <a href="{% url 'gerar_contracheque_pdf' f.id %}" class="btn btn-danger rounded-pill">Baixar PDF</a>
    </div>
    <div class="card shadow-lg p-5 mx-auto" style="max-width: 900px;">
        <div class="row border-bottom pb-3 mb-3">
            <div class="col-8"><h4>BUSINESS STACK</h4><small>CNPJ: 00.000.000/0001-00</small></div>
            <div class="col-4 text-end"><h5>RECIBO DE PAGAMENTO</h5><span class="badge bg-light text-dark border">{{ mes_referencia }}</span></div>
        </div>
        <div class="row bg-light p-3 mb-3">
            <div class="col-6"><small>COLABORADOR</small><div>{{ f.nome_completo }}</div></div>
            <div class="col-3"><small>CARGO</small><div>{{ f.cargo }}</div></div>
            <div class="col-3"><small>LOTAÇÃO</small><div>{{ f.lotacao|default:'-' }}</div></div>
        </div>
        <table class="table table-bordered">
            <thead class="table-secondary">
                <tr><th>Cód</th><th>Descrição</th><th>Ref.</th><th class="text-end">Vencimentos</th><th class="text-end">Descontos</th></tr>
            </thead>
            <tbody>
                {% for item in itens_holerite %}
                <tr>
                    <td>{{ item.codigo }}</td>
                    <td>{{ item.descricao }}</td>
                    <td>{{ item.ref }}</td>
                    <td class="text-end">
                        {% if item.vencimento > 0 %}{{ item.vencimento|floatformat:2 }}{% endif %}
                    </td>
                    <td class="text-end">
                        {% if item.desconto > 0 %}{{ item.desconto|floatformat:2 }}{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot class="fw-bold">
                <tr>
                    <td colspan="3" class="text-end">TOTAIS</td>
                    <td class="text-end text-primary">{{ total_vencimentos|floatformat:2 }}</td>
                    <td class="text-end text-danger">{{ total_descontos|floatformat:2 }}</td>
                </tr>
            </tfoot>
        </table>
        <div class="row mt-4">
            <div class="col-8 p-3 border bg-light">
                <small class="d-block fw-bold">BASES</small>
                <span class="me-3">FGTS Mês: {{ fgts|floatformat:2 }}</span>
                <span>Base IRRF: {{ base_irrf|floatformat:2 }}</span>
            </div>
            <div class="col-4 p-3 border bg-success bg-opacity-10 text-end">
                <small class="text-success fw-bold">LÍQUIDO</small>
                <div class="fs-3 fw-bold text-success">{{ f.salario_liquido|floatformat:2 }}</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}